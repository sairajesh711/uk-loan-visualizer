<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Overpay vs Invest — UK Loan Visualiser</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Base */
      --bg:#020617;
      --panel-bg:rgba(15,23,42,.7);
      --card-bg:rgba(2,6,23,.55);
      --border:rgba(51,65,85,.55);
      --text:#cbd5e1; --text-strong:#f8fafc; --muted:#94a3b8;

      /* Brand pops */
      --invest:#22c55e;   /* green */
      --overpay:#06b6d4;  /* cyan/blue */
      --invest-ghost: rgba(34,197,94,.14);
      --overpay-ghost: rgba(6,182,212,.14);

      --radius:16px; --shadow:0 14px 38px rgba(0,0,0,.28);
      --font:'Manrope', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    *,*:before,*:after{box-sizing:border-box}
    body{margin:0;font-family:var(--font);color:var(--text);background:radial-gradient(1200px 600px at 10% -10%, rgba(34,197,94,.08), transparent), radial-gradient(1200px 700px at 120% 10%, rgba(6,182,212,.10), transparent), var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden}
    .container{max-width:1100px;margin:0 auto;padding:32px 16px}
    .d-none{display:none!important}

    h1{font-size:34px;letter-spacing:-.03em;margin:0 0 6px;color:var(--text-strong);font-weight:800;text-align:center}
    h2{font-size:20px;margin:0 0 16px;color:var(--text-strong);font-weight:700}
    .subtitle{font-size:14px;color:var(--muted);text-align:center;margin:0 0 24px}
    .eyebrow{font-size:12px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase;font-weight:800}
    .big-value{font-size:40px;letter-spacing:-.02em;color:var(--text-strong);font-weight:800}

    /* Panels / Cards */
    .panel{background:linear-gradient(180deg, rgba(15,23,42,.85), rgba(15,23,42,.60));border:1px solid var(--border);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);margin-bottom:24px}
    .card{background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:18px 20px;box-shadow:var(--shadow)}

    /* Grid */
    .main-grid{display:grid;grid-template-columns:400px 1fr;gap:24px;align-items:start}
    @media(max-width:900px){.main-grid{grid-template-columns:1fr}}
    .input-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media(max-width:560px){.input-grid{grid-template-columns:1fr}}
    .kpi-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}
    @media(max-width:560px){.kpi-grid{grid-template-columns:1fr}}

    /* Inputs */
    label{font-size:13px;color:var(--text);font-weight:700;margin-bottom:6px;display:block}
    input[type="number"]{width:100%;padding:12px 12px;border-radius:10px;border:1px solid var(--border);background:#0b1220;color:var(--text-strong);font:600 16px var(--font);outline:none}
    input[type="number"]:focus{border-color:var(--overpay);box-shadow:0 0 0 3px rgba(6,182,212,.18)}
    input[type="range"]{width:100%;accent-color:var(--overpay);margin-top:8px}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;width:100%;background:linear-gradient(135deg, var(--overpay), #33e1ff);color:#02131a;font-weight:900;padding:12px 18px;border:none;border-radius:999px;cursor:pointer;transition:transform .15s ease, filter .15s ease;text-decoration:none}
    .btn:hover{transform:translateY(-1px);filter:saturate(1.1)}
    .btn.secondary{background:linear-gradient(135deg, rgba(6,182,212,.12), rgba(6,182,212,.05));color:var(--text-strong);border:1px solid var(--border)}
    .btn.secondary:hover{filter:brightness(1.08)}

    /* Timeline */
    .timeline-container{height:44px;background:#0b1220;border-radius:12px;position:relative;overflow:hidden;border:1px solid var(--border)}
    .timeline-bar{position:absolute;top:0;left:0;height:100%;transition:width .45s ease-out}
    .timeline-original{background:#0a1020}
    .timeline-new{background:linear-gradient(90deg, var(--overpay), #33e1ff)}
    .timeline-label{position:absolute;top:50%;transform:translateY(-50%);padding:0 10px;font-size:12px;font-weight:900;color:#001219;white-space:nowrap}
    .label-original{right:10px;color:var(--muted)}
    .label-new{left:10px;color:#001219}

    /* Recommendation */
    .recommendation{border-left:4px solid var(--invest);padding-left:18px}
    .recommendation.invest{border-left-color:var(--invest)}
    .recommendation.overpay{border-left-color:var(--overpay)}
    .recommendation-title{font-size:18px;color:var(--text-strong);font-weight:800;margin-bottom:6px}

    /* Compare cards with “winner glow” */
    .cmp-card{position:relative;overflow:hidden}
    .cmp-card[data-path="invest"]{border-color:rgba(34,197,94,.35);background:linear-gradient(180deg, rgba(34,197,94,.06), transparent)}
    .cmp-card[data-path="overpay"]{border-color:rgba(6,182,212,.35);background:linear-gradient(180deg, rgba(6,182,212,.06), transparent)}
    .cmp-card.is-winner{box-shadow:0 0 0 1px currentColor inset, 0 12px 40px rgba(0,0,0,.35)}
    .cmp-card.is-winner:after{content:"Recommended";position:absolute;top:12px;right:12px;font:800 12px var(--font);letter-spacing:.3px;background:rgba(255,255,255,.06);border:1px solid var(--border);padding:6px 10px;border-radius:999px}

    /* Chart wrapper */
    .chart-placeholder{width:100%;height:360px;background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:8px}

    /* Alerts */
    .alert{border:1px solid var(--border);border-radius:var(--radius);padding:12px 14px;background:#3b1f24;color:#ffd7dc;margin-bottom:16px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1 id="main-title">Overpay vs. Invest</h1>
      <p id="main-subtitle" class="subtitle">See how overpaying your loan compares to investing the same amount — using a fair, fixed horizon.</p>
    </header>

    <!-- ACT I: OVERPAYMENT -->
    <section id="overpayment-visualizer" class="section">
      <div class="main-grid">
        <!-- Inputs -->
        <div class="panel">
          <h2>Your Loan</h2>
          <div class="input-grid">
            <div>
              <label for="outstandingBalance">Balance (£)</label>
              <input id="outstandingBalance" type="number" inputmode="decimal" step="1000" placeholder="250000" />
            </div>
            <div>
              <label for="interestApr">APR (%)</label>
              <input id="interestApr" type="number" step="0.05" placeholder="4.25" />
            </div>
            <div>
              <label for="remainingTermMonths">Months Left</label>
              <input id="remainingTermMonths" type="number" step="1" placeholder="300" />
            </div>
            <div>
              <label for="currentMonthlyPayment">Payment (£)</label>
              <input id="currentMonthlyPayment" type="number" step="10" placeholder="1350" />
            </div>
          </div>

          <hr style="border-color:var(--border);margin:18px 0">

          <label for="overpayMonthly">Additional Monthly Overpayment</label>
          <div style="display:flex;justify-content:space-between;align-items:baseline">
            <span class="eyebrow">Drag to explore</span>
            <span id="overpayValue" class="big-value" style="font-size:28px">£200</span>
          </div>
          <input id="overpayMonthly" type="range" min="0" max="5000" step="50" value="200" />

          <hr style="border-color:var(--border);margin:18px 0">
          <button type="button" id="calculate-btn" class="btn">Calculate Savings</button>
        </div>

        <!-- Results -->
        <div id="results-panel">
          <div class="panel" style="text-align:center">
            <h2>When could you be debt-free?</h2>
            <div class="timeline-container" aria-label="Timeline to payoff">
              <div class="timeline-bar timeline-original" style="width:100%">
                <span class="timeline-label label-original">Original</span>
              </div>
              <div id="timeline-new" class="timeline-bar timeline-new" style="width:100%">
                <span class="timeline-label label-new">New</span>
              </div>
            </div>
            <div class="kpi-grid">
              <div class="card" style="text-align:center">
                <span class="eyebrow">Debt-free sooner by</span>
                <div id="result-monthsSaved" class="big-value" style="color:var(--overpay)">—</div>
              </div>
              <div class="card" style="text-align:center">
                <span class="eyebrow">Total interest saved</span>
                <div id="result-interestSaved" class="big-value" style="color:var(--overpay)">—</div>
              </div>
            </div>
          </div>

          <div style="text-align:center">
            <button type="button" id="show-investment-btn" class="btn secondary">Now, compare with Investing →</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ACT II: FAIR COMPARISON -->
    <section id="investment-comparison" class="section d-none">
      <div class="main-grid">
        <!-- Left controls -->
        <div class="panel">
          <h2>Investment Strategy</h2>
          <p class="help-text" style="margin:-6px 0 18px 0">Set an assumed annual return to compare against overpaying.</p>
          <div class="range-group">
            <div style="display:flex;justify-content:space-between;align-items:baseline">
              <label for="expectedReturn">Assumed annual investment return</label>
              <span id="expectedReturnValue" class="big-value" style="font-size:26px">5.0%</span>
            </div>
            <input id="expectedReturn" type="range" min="0" max="15" step="0.1" value="5.0" />
          </div>
          <hr style="border-color:var(--border);margin:18px 0">
          <button type="button" id="recalculate-btn" class="btn">Recalculate Comparison</button>
        </div>

        <!-- Right summary -->
        <div>
          <div id="errorBanner" class="alert d-none" role="alert" aria-live="assertive">
            <strong>Can’t calculate</strong>
            <div id="errorText" class="muted">—</div>
          </div>

          <div class="panel">
            <div id="recommendation-panel" class="recommendation invest">
              <div id="recommendation-title" class="recommendation-title">Recommendation</div>
              <p id="recommendation-text" class="help-text" style="margin:0">—</p>
            </div>
          </div>

          <div style="text-align:center">
            <button type="button" id="back-to-overpay-btn" class="btn secondary">← Back to Overpayment</button>
          </div>
        </div>
      </div>

      <div class="panel">
        <h2>Final Outcome (at your original payoff date)</h2>
        <div class="kpi-grid">
          <div id="card-overpay" class="card cmp-card" data-path="overpay" style="text-align:center;color:var(--overpay)">
            <span class="eyebrow">Overpay Path Final Pot</span>
            <div id="result-overpayPot" class="big-value">—</div>
          </div>
          <div id="card-invest" class="card cmp-card" data-path="invest" style="text-align:center;color:var(--invest)">
            <span class="eyebrow">Invest Path Final Pot</span>
            <div id="result-investPot" class="big-value">—</div>
          </div>
        </div>
      </div>

      <div class="panel">
        <h2>Wealth Over Time (Net = Investments − Loan)</h2>
        <div class="chart-placeholder"><canvas id="wealthChart"></canvas></div>
      </div>

      <div class="panel">
        <details>
          <summary>How is this comparison calculated?</summary>
          <div class="explainer">
            <ul>
              <li><strong>Overpay Path</strong>: You clear your loan early, then invest your entire original monthly payment for the remaining term.</li>
              <li><strong>Invest Path</strong>: You make standard loan payments and invest the extra amount every month for the full original term.</li>
            </ul>
          </div>
        </details>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.umd.min.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
